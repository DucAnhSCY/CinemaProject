<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cinema Paradise - Modern Movie Booking System</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" th:href="@{/favicon.svg}">
    <link rel="icon" type="image/x-icon" th:href="@{/favicon.ico}">
    <link rel="apple-touch-icon" href="/favicon.svg" th:href="@{/favicon.svg}">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Cinema Theme CSS -->
    <link th:href="@{/css/cinema-theme.css}" rel="stylesheet">
</head>
<body>
    <!-- Navigation Fragment -->
    <div th:replace="~{layout/fragments/navigation :: nav}"></div>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Hero Section -->
        <section class="hero-section" style="background: linear-gradient(135deg, rgba(10, 10, 10, 0.8), rgba(26, 26, 26, 0.8)), url('https://images.unsplash.com/photo-1440404653325-ab127d49abc1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80') center/cover; min-height: 100vh; display: flex; align-items: center; position: relative; overflow: hidden;">
            <!-- Animated Background -->
            <div class="hero-particles"></div>
            
            <div class="container position-relative">
                <div class="row align-items-center min-vh-100">
                    <div class="col-lg-6">
                        <div class="hero-content">
                            <div class="hero-badge mb-4">
                                <span class="badge bg-primary px-4 py-2" style="border-radius: 50px; font-size: 1rem;">
                                    <i class="fas fa-star me-2"></i>Cinema Paradise
                                </span>
                            </div>
                            <h1 class="hero-title text-white mb-4" style="font-size: 3.5rem; font-weight: 700; line-height: 1.2;">
                                Experience 
                                <span class="text-primary">Cinema</span>
                                Excellence
                            </h1>
                            <p class="hero-subtitle text-light mb-5" style="font-size: 1.3rem; opacity: 0.9;">
                                Book movie tickets quickly and conveniently with our modern system. 
                                Enjoy top-tier movies with perfect picture and sound quality.
                            </p>
                            <div class="hero-actions d-flex flex-column flex-sm-row gap-3">
                                <a href="#movies" class="btn btn-primary btn-lg px-5 py-3" style="border-radius: 50px; background: linear-gradient(135deg, #e50914 0%, #b81d24 100%); border: none; box-shadow: 0 8px 25px rgba(229, 9, 20, 0.4); font-weight: 600;">
                                    <i class="fas fa-play me-2"></i>Watch Movies Now
                                </a>
                                <a href="#search" class="btn btn-outline-light btn-lg px-5 py-3" style="border-radius: 50px; border: 2px solid rgba(255, 255, 255, 0.3); backdrop-filter: blur(10px); font-weight: 600;">
                                    <i class="fas fa-search me-2"></i>Search Movies
                                </a>
                            </div>
                            
                            <!-- Stats -->
                            <div class="hero-stats mt-5 d-flex flex-wrap gap-4">
                                <div class="stat-item">
                                    <h3 class="text-primary mb-1">1000+</h3>
                                    <small class="text-light opacity-75">Hot Movies</small>
                                </div>
                                <div class="stat-item">
                                    <h3 class="text-primary mb-1">50+</h3>
                                    <small class="text-light opacity-75">Cinemas</small>
                                </div>
                                <div class="stat-item">
                                    <h3 class="text-primary mb-1">10M+</h3>
                                    <small class="text-light opacity-75">Customers</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-6">
                        <div class="hero-visual">
                            <div class="cinema-showcase">
                                <!-- Featured Screenings Carousel -->
                                <div th:if="${not #lists.isEmpty(featuredScreenings)}" id="featuredScreeningsCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="4000">
                                    <div class="carousel-inner">
                                        <div th:each="screening, iterStat : ${featuredScreenings}" 
                                             th:class="${iterStat.index == 0 ? 'carousel-item active' : 'carousel-item'}">
                                            <div class="showcase-card floating">
                                                <div class="card border-0 shadow-lg" style="background: rgba(42, 42, 42, 0.9); backdrop-filter: blur(20px); border-radius: 20px;">
                                                    <div class="card-body p-4">
                                                        <div class="d-flex align-items-center mb-3">
                                                            <div class="movie-poster-mini me-3" style="width: 60px; height: 90px; border-radius: 8px; overflow: hidden; position: relative;">
                                                                <img th:if="${screening.movie.posterUrl}" 
                                                                     th:src="${screening.movie.posterUrl}" 
                                                                     th:alt="${screening.movie.title + ' Poster'}"
                                                                     th:title="${screening.movie.title}"
                                                                     style="width: 100%; height: 100%; object-fit: cover;">
                                                                <div th:unless="${screening.movie.posterUrl}" 
                                                                     style="width: 100%; height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center;">
                                                                    <i class="fas fa-film text-white"></i>
                                                                </div>
                                                            </div>
                                                            <div class="flex-grow-1">
                                                                <h6 class="text-white mb-1" th:text="${screening.movie.title}">Movie Title</h6>
                                                                <small class="text-muted">
                                                                    <i class="fas fa-clock me-1"></i>
                                                                    <span th:text="${#temporals.format(screening.startTime, 'HH:mm')}">19:30</span>
                                                                    <span class="mx-1">-</span>
                                                                    <i class="fas fa-map-marker-alt me-1"></i>
                                                                    <span th:text="${screening.auditorium.theater.name}">Cinema Name</span>
                                                                </small>
                                                                <div class="mt-1">
                                                                    <small class="text-info">
                                                                        <i class="fas fa-calendar me-1"></i>
                                                                        <span th:text="${#temporals.format(screening.startTime, 'dd/MM/yyyy')}">25/07/2025</span>
                                                                    </small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex justify-content-between align-items-center">
                                                            <div class="screening-info">
                                                                <div class="mb-1">
                                                                    <small class="text-muted">Hall:</small>
                                                                    <span class="badge bg-secondary ms-1" th:text="${screening.auditorium.name}">Hall 1</span>
                                                                </div>
                                                                <div>
                                                                    <small class="text-muted">Genre:</small>
                                                                    <span class="badge bg-info ms-1" th:text="${screening.movie.genre}">Action</span>
                                                                </div>
                                                            </div>
                                                            <div class="price-booking text-end">
                                                                <div class="price text-warning fw-bold mb-1" th:text="${#numbers.formatDecimal(screening.ticketPrice / 1000, 0, 'COMMA', 3, 'POINT')} + ' VND'">240 VND</div>
                                                                <a th:href="@{'/booking/screening/' + ${screening.id}}" 
                                                                   class="btn btn-primary btn-sm px-3" 
                                                                   style="border-radius: 20px; font-size: 0.75rem;">
                                                                    <i class="fas fa-ticket-alt me-1"></i>Book Ticket
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Carousel Controls -->
                                    <button class="carousel-control-prev" type="button" data-bs-target="#featuredScreeningsCarousel" data-bs-slide="prev" style="left: -50px;" title="Previous">
                                        <div class="carousel-control-icon" style="background: rgba(229, 9, 20, 0.8); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;">
                                            <i class="fas fa-chevron-left text-white"></i>
                                        </div>
                                        <span class="visually-hidden">Previous</span>
                                    </button>
                                    <button class="carousel-control-next" type="button" data-bs-target="#featuredScreeningsCarousel" data-bs-slide="next" style="right: -50px;" title="Next">
                                        <div class="carousel-control-icon" style="background: rgba(229, 9, 20, 0.8); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;">
                                            <i class="fas fa-chevron-right text-white"></i>
                                        </div>
                                        <span class="visually-hidden">Next</span>
                                    </button>
                                    
                                    <!-- Carousel Indicators -->
                                    <div class="carousel-indicators" style="bottom: -30px;">
                                        <button th:each="screening, iterStat : ${featuredScreenings}" 
                                                type="button" 
                                                data-bs-target="#featuredScreeningsCarousel" 
                                                th:data-bs-slide-to="${iterStat.index}"
                                                th:class="${iterStat.index == 0 ? 'active' : ''}"
                                                style="width: 12px; height: 12px; border-radius: 50%; background: rgba(229, 9, 20, 0.5); border: 2px solid rgba(255, 255, 255, 0.3);"
                                                th:aria-label="'Slide ' + ${iterStat.index + 1}"
                                                th:title="'Show screening ' + ${iterStat.index + 1}"></button>
                                    </div>
                                </div>
                                
                                <!-- Fallback when no screenings available -->
                                <div th:if="${#lists.isEmpty(featuredScreenings)}" class="showcase-card floating">
                                    <div class="card border-0 shadow-lg" style="background: rgba(42, 42, 42, 0.9); backdrop-filter: blur(20px); border-radius: 20px;">
                                        <div class="card-body p-4 text-center">
                                            <div class="mb-3">
                                                <i class="fas fa-film text-muted" style="font-size: 3rem;"></i>
                                            </div>
                                            <h6 class="text-white mb-2">No Screenings Available</h6>
                                            <small class="text-muted">Currently no screenings are scheduled</small>
                                            <div class="mt-3">
                                                <a href="/movies" class="btn btn-primary btn-sm px-3" style="border-radius: 20px;">
                                                    <i class="fas fa-search me-1"></i>View Movies
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Scroll Indicator -->
                <div class="scroll-indicator">
                    <a href="#search" class="text-white">
                        <i class="fas fa-chevron-down fa-2x"></i>
                    </a>
                </div>
            </div>
        </section>

        <!-- Search Section -->
        <section id="search" class="py-5" style="background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-10">
                        <div class="search-section-header text-center mb-5">
                            <h2 class="text-white mb-3">
                                <i class="fas fa-search me-3 text-primary"></i>Find Your Favorite Movies
                            </h2>
                            <p class="text-muted fs-5">Discover thousands of excellent movies from around the world</p>
                        </div>
                        
                        <div class="search-card">
                            <div class="card border-0 shadow-lg" style="background: rgba(42, 42, 42, 0.95); backdrop-filter: blur(20px); border-radius: 20px;">
                                <div class="card-body p-5">
                                    <form id="movieSearchForm" th:action="@{/search}" method="get">
                                        <div class="row g-4">
                                            <div class="col-lg-5">
                                                <div class="form-floating">
                                                    <input type="text" class="form-control search-input" id="searchTitle" name="title" placeholder="Enter movie title..." style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); color: #fff; border-radius: 12px;">
                                                    <label for="searchTitle" class="text-muted">
                                                        <i class="fas fa-film me-2"></i>Movie Title
                                                    </label>
                                                </div>
                                            </div>
                                            
                                            <div class="col-lg-4">
                                                <div class="form-floating">
                                                    <select class="form-select search-select" id="searchGenre" name="genre" style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); color: #fff; border-radius: 12px;">
                                                        <option value="">All Genres</option>
                                                        <option value="Action">Action</option>
                                                        <option value="Comedy">Comedy</option>
                                                        <option value="Drama">Drama</option>
                                                        <option value="Horror">Horror</option>
                                                        <option value="Romance">Romance</option>
                                                        <option value="Sci-Fi">Sci-Fi</option>
                                                        <option value="Thriller">Thriller</option>
                                                    </select>
                                                    <label for="searchGenre" class="text-muted">
                                                        <i class="fas fa-tags me-2"></i>Genre
                                                    </label>
                                                </div>
                                            </div>
                                            
                                            <div class="col-lg-3">
                                                <button type="submit" class="btn btn-primary w-100 h-100 search-btn" style="border-radius: 12px; background: linear-gradient(135deg, #e50914 0%, #b81d24 100%); border: none; box-shadow: 0 4px 15px rgba(229, 9, 20, 0.3); font-weight: 600;">
                                                    <i class="fas fa-search me-2"></i>Search
                                                </button>
                                            </div>
                                        </div>
                                        
                                        <!-- Quick Search Tags -->
                                        <div class="quick-search mt-4">
                                            <small class="text-muted me-3">Quick Search:</small>
                                            <div class="d-inline-flex flex-wrap gap-2">
                                                <span class="badge bg-secondary search-tag" data-genre="Action" style="cursor: pointer; padding: 8px 12px; border-radius: 20px;">
                                                    Action
                                                </span>
                                                <span class="badge bg-secondary search-tag" data-genre="Comedy" style="cursor: pointer; padding: 8px 12px; border-radius: 20px;">
                                                    Comedy
                                                </span>
                                                <span class="badge bg-secondary search-tag" data-genre="Horror" style="cursor: pointer; padding: 8px 12px; border-radius: 20px;">
                                                    Horror
                                                </span>
                                                <span class="badge bg-secondary search-tag" data-genre="Romance" style="cursor: pointer; padding: 8px 12px; border-radius: 20px;">
                                                    Romance
                                                </span>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Movies Section -->
        <section id="movies" class="py-5">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <h2 class="text-center mb-5">
                            <i class="fas fa-film me-3"></i>Now Showing
                        </h2>
                    </div>
                </div>

                <!-- Movies Grid -->
                <div class="row g-4" th:if="${!#lists.isEmpty(featuredMovies)}">
                    <div th:each="movie : ${featuredMovies}" class="col-lg-3 col-md-4 col-sm-6">
                        <div class="movie-card">
                            <div class="movie-image">
                                <img th:src="${movie.posterUrl}" th:alt="${movie.title != null ? movie.title + ' Poster' : 'Movie poster'}" th:title="${movie.title != null ? movie.title : 'Movie poster'}" class="card-img-top" loading="lazy">
                                <div class="movie-overlay">
                                    <div class="movie-actions">
                                        <a th:href="@{/movies/{id}(id=${movie.id})}" class="btn btn-primary btn-sm">
                                            <i class="fas fa-eye me-1"></i>Details
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div class="movie-info">
                                <h5 class="movie-title" th:text="${movie.title}">Movie Title</h5>
                                <div class="movie-meta">
                                    <span class="movie-duration" th:if="${movie.durationMin}">
                                        <i class="fas fa-clock me-1"></i>
                                        <span th:text="${movie.durationMin}">120</span> min
                                    </span>
                                    <span class="movie-rating" th:if="${movie.rating}">
                                        <i class="fas fa-star me-1"></i>
                                        <span th:text="${movie.rating}">8.5</span>/10
                                    </span>
                                </div>
                                <div class="movie-genres" th:if="${movie.genre}">
                                    <span class="badge bg-secondary me-1" th:text="${movie.genre}">Action</span>
                                    <span th:if="${movie.tmdbId != null}" class="badge bg-info ms-2">TMDB</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Dynamic Movies Container for JavaScript -->
                <div id="moviesContainer" class="row g-4 d-none">
                    <!-- Movies will be loaded here by JavaScript -->
                </div>

                <!-- No Movies Message -->
                <div class="text-center py-5" th:if="${#lists.isEmpty(featuredMovies)}">
                    <i class="fas fa-film text-muted mb-3 display-1"></i>
                    <h4 class="text-muted">No movies available</h4>
                    <p class="text-muted">Currently no movies in the system.</p>
                    <a th:href="@{/admin/tmdb}" sec:authorize="hasRole('ADMIN')" class="btn btn-primary">
                        <i class="fas fa-plus me-2"></i>Add Movies From TMDB
                    </a>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="py-5 bg-dark-secondary">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <h2 class="text-center mb-5">Why Choose CinemaBooking?</h2>
                    </div>
                </div>
                <div class="row g-4">
                    <div class="col-lg-4 col-md-6">
                        <div class="feature-card text-center">
                            <div class="feature-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <h4>Quick Ticket Booking</h4>
                            <p>In just a few minutes, you can complete booking tickets for your favorite movies.</p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <div class="feature-card text-center">
                            <div class="feature-icon">
                                <i class="fas fa-mobile-alt"></i>
                            </div>
                            <h4>Multi-Device Compatible</h4>
                            <p>Use easily and conveniently on computers, phones, and tablets.</p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <div class="feature-card text-center">
                            <div class="feature-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <h4>High Security</h4>
                            <p>Personal and payment information is protected with modern security technology.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer bg-dark py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-6 mb-4">
                    <h5 class="text-primary mb-3">
                        <i class="fas fa-film me-2"></i>CinemaBooking
                    </h5>
                    <p class="text-muted">Leading online movie ticket booking system in Vietnam. Bringing excellent cinema experience to everyone.</p>
                    <div class="social-links">
                        <a href="#" class="text-primary me-3" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-primary me-3" title="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-primary me-3" title="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-primary" title="YouTube"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6 class="text-white mb-3">Services</h6>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-muted text-decoration-none">Online Booking</a></li>
                        <li><a href="#" class="text-muted text-decoration-none">Promotions</a></li>
                        <li><a href="#" class="text-muted text-decoration-none">Membership</a></li>
                        <li><a href="#" class="text-muted text-decoration-none">Gift Card</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6 class="text-white mb-3">Support</h6>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-muted text-decoration-none">Contact</a></li>
                        <li><a href="#" class="text-muted text-decoration-none">FAQ</a></li>
                        <li><a href="#" class="text-muted text-decoration-none">Policies</a></li>
                        <li><a href="#" class="text-muted text-decoration-none">Terms</a></li>
                    </ul>
                </div>
                <div class="col-lg-4 col-md-6 mb-4">
                    <h6 class="text-white mb-3">Contact</h6>
                    <ul class="list-unstyled text-muted">
                        <li><i class="fas fa-map-marker-alt me-2"></i>123 ABC Street, District 1, HCMC</li>
                        <li><i class="fas fa-phone me-2"></i>+84 123 456 789</li>
                        <li><i class="fas fa-envelope me-2"></i>info@cinemabooking.vn</li>
                    </ul>
                </div>
            </div>
            <hr class="my-4">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="text-muted mb-0">&copy; 2025 CinemaBooking. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="text-muted mb-0">Developed by <a href="#" class="text-primary text-decoration-none">Team N07</a></p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Cinema App JavaScript -->
    <script th:src="@{/js/cinema-app.js}"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize smooth scrolling for hero buttons
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    
                    // Check if targetId is valid
                    if (targetId && targetId.length > 1 && targetId.startsWith('#')) {
                        const target = document.querySelector(targetId);
                        if (target) {
                            target.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }
                    }
                });
            });

            // Add fade-in animation
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                    }
                });
            }, observerOptions);

            // Observe all movie cards
            document.querySelectorAll('.movie-card').forEach(card => {
                observer.observe(card);
            });

            // Observe feature cards
            document.querySelectorAll('.feature-card').forEach(card => {
                observer.observe(card);
            });
        });
    </script>
</body>
</html>
